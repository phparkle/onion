{"mappings":"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","sources":["../src/onion.ts","src/index.js"],"sourcesContent":["interface OnionElement extends HTMLElement {\n  onion?: {\n    abort: () => void;\n  }\n}\n\ninterface ClassList {\n  [key: string]: boolean;\n}\n\nfunction setClasses(el: Element, classes: ClassList) {\n  Object.entries(classes)\n    .filter(([key]) => key.length)\n    .forEach(([key, value]) => el.classList.toggle(key, value));\n}\n\nfunction addEndListener(el: Element, listener: () => void) {\n  el.addEventListener(\"transitionend\", listener);\n  el.addEventListener(\"animationend\", listener);\n}\n\nfunction removeEndListener(el: Element, listener: () => void) {\n  el.removeEventListener(\"transitionend\", listener);\n  el.removeEventListener(\"animationend\", listener);\n}\n\nfunction show(el: OnionElement, token: string = \"\") {\n  if (!(el instanceof HTMLElement)) return;\n\n  if (el.classList.contains(\"is-opening\"))\n    return;\n\n  el.onion?.abort();\n\n  if (token === \"is-opening\")\n    token = \"\";\n\n  const handleEnd = () => {\n    setClasses(el, {\n      \"is-open\": true,\n      \"is-opening\": true,\n      \"is-closing\": false,\n      [token]: false,\n    });\n    el.onion?.abort();\n  }\n\n  const timeoutID = setTimeout(handleEnd, 2000);\n\n  el.onion = {\n    abort: () => {\n      removeEndListener(el, handleEnd);\n      clearTimeout(timeoutID);\n      setClasses(el, { [token]: false });\n    }\n  }\n\n  addEndListener(el, handleEnd);\n\n  setClasses(el, {\n    \"is-open\": true,\n    \"is-opening\": false,\n    \"is-closing\": false,\n    [token]: false,\n  });\n\n  setTimeout(() => setClasses(el, {\n    \"is-open\": true,\n    \"is-opening\": true,\n    \"is-closing\": false,\n    [token]: true,\n  }));\n}\n\nfunction hide(el: OnionElement, token: string = \"\") {\n  if (!(el instanceof HTMLElement)) return;\n\n  if (el.classList.contains(\"is-closing\") || !el.classList.contains(\"is-open\"))\n    return;\n\n  el.onion?.abort();\n\n  if (token === \"is-closing\")\n    token = \"\";\n\n  const handleEnd = () => {\n    setClasses(el, {\n      \"is-open\": false,\n      \"is-opening\": false,\n      \"is-closing\": false,\n      [token]: false,\n    });\n    el.onion?.abort();\n  }\n\n  const timeoutID = setTimeout(handleEnd, 2000);\n\n  el.onion = {\n    abort: () => {\n      removeEndListener(el, handleEnd);\n      clearTimeout(timeoutID);\n      setClasses(el, { [token]: false });\n    }\n  }\n\n  addEndListener(el, handleEnd);\n\n  setClasses(el, {\n    \"is-open\": true,\n    \"is-opening\": false,\n    \"is-closing\": true,\n    [token]: true,\n  });\n}\n\nfunction toggle(el: OnionElement, force?: boolean, openingToken: string = \"\", closingToken: string = \"\") {\n  if (!(el instanceof HTMLElement)) return;\n\n  if (typeof force === 'undefined') {\n    if (el.classList.contains('is-opening')) {\n      hide(el, closingToken);\n    } else {\n      show(el, openingToken);\n    }\n  } else {\n    if (force) show(el, openingToken);\n    else hide(el, closingToken);\n  }\n}\n\nexport default {\n  show,\n  hide,\n  toggle\n};\n","import onion from \"onion\";\n\n(() => {\n  const boxes = document.querySelectorAll(\".box--transition, .box--animation\");\n  const cssboxes = document.querySelectorAll(\".box.animate__animated\");\n\n  const show = () => {\n    boxes.forEach(box => onion.show(box));\n    cssboxes.forEach(box => onion.show(box, \"animate__bounceIn\"));\n  }\n  \n  const hide = () => {\n    boxes.forEach(box => onion.hide(box));\n    cssboxes.forEach(box => onion.hide(box, \"animate__bounceOut\"));\n  }\n  \n  const toggle = () => {\n    boxes.forEach(box => onion.toggle(box));\n    cssboxes.forEach(box => onion.toggle(box, undefined, \"animate__bounceIn\", \"animate__bounceOut\"));\n  }\n\n  document.querySelector(\".button--show\").addEventListener(\"click\", show);\n  document.querySelector(\".button--hide\").addEventListener(\"click\", hide);\n  document.querySelector(\".button--toggle\").addEventListener(\"click\", toggle);\n})();\n"],"names":["$ca3e6a4121bcbb4f$var$setClasses","el","classes","Object","entries","filter","key","length","forEach","value","classList","toggle","$ca3e6a4121bcbb4f$var$addEndListener","listener","addEventListener","$ca3e6a4121bcbb4f$var$removeEndListener","removeEventListener","$ca3e6a4121bcbb4f$var$show","token","ref","HTMLElement","contains","onion","abort","handleEnd","timeoutID","setTimeout","clearTimeout","$ca3e6a4121bcbb4f$var$hide","$ca3e6a4121bcbb4f$export$2e2bcd8739ae039","force","openingToken","closingToken","boxes","document","querySelectorAll","cssboxes","querySelector","box","show","hide","undefined"],"version":3,"file":"index.01794083.js.map"}