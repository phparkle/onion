{"mappings":"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","sources":["../dist/onion.umd.js","../src/onion.ts"],"sourcesContent":["!function(n,i){\"object\"==typeof exports&&\"undefined\"!=typeof module?i(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],i):i((n||self).onion={})}(this,function(n){function i(n,i){Object.entries(i).forEach(function(i){return n.classList.toggle(i[0],i[1])})}function o(n,i){n.addEventListener(\"transitionend\",i),n.addEventListener(\"animationend\",i)}function e(n,i){n.removeEventListener(\"transitionend\",i),n.removeEventListener(\"animationend\",i)}function s(n){var s;if(n instanceof HTMLElement&&(!n.classList.contains(\"is-open\")||n.classList.contains(\"is-closing\"))){null==(s=n.onion)||s.abort();var t=function(){var o;i(n,{\"is-open\":!0,\"is-closed\":!1,\"is-opening\":!1,\"is-closing\":!1}),null==(o=n.onion)||o.abort()},c=setTimeout(t,2e3);n.onion={abort:function(){e(n,t),clearTimeout(c)}},o(n,t),i(n,{\"is-open\":!1,\"is-closed\":!1,\"is-opening\":!1,\"is-closing\":!1}),setTimeout(function(){i(n,{\"is-open\":!0,\"is-closed\":!1,\"is-opening\":!0,\"is-closing\":!1})})}}function t(n){var s;if(n instanceof HTMLElement&&!n.classList.contains(\"is-closed\")){null==(s=n.onion)||s.abort();var t=function(){var o;i(n,{\"is-open\":!1,\"is-closed\":!0,\"is-opening\":!1,\"is-closing\":!1}),null==(o=n.onion)||o.abort()},c=setTimeout(t,2e3);n.onion={abort:function(){e(n,t),clearTimeout(c)}},o(n,t),i(n,{\"is-open\":!0,\"is-closed\":!1,\"is-opening\":!1,\"is-closing\":!0})}}n.hide=t,n.show=s,n.toggle=function(n,i){var o;n instanceof HTMLElement&&(null==(o=n.onion)||o.abort(),void 0===i?n.classList.contains(\"is-open\")&&!n.classList.contains(\"is-closing\")?t(n):s(n):i?s(n):t(n))}});\n//# sourceMappingURL=onion.umd.js.map\n","interface OnionElement extends HTMLElement {\n  onion?: {\n    abort: () => void;\n  }\n}\n\ninterface ClassList {\n  [key: string]: boolean;\n}\n\nfunction setClasses(el: Element, classes: ClassList) {\n  Object.entries(classes).forEach(([key, value]) => el.classList.toggle(key, value));\n}\n\nfunction addEndListener(el: Element, listener: () => void) {\n  el.addEventListener(\"transitionend\", listener);\n  el.addEventListener(\"animationend\", listener);\n}\n\nfunction removeEndListener(el: Element, listener: () => void) {\n  el.removeEventListener(\"transitionend\", listener);\n  el.removeEventListener(\"animationend\", listener);\n}\n\nexport function show(el: OnionElement) {\n  if (!(el instanceof HTMLElement)) return;\n\n  if (el.classList.contains(\"is-open\") && !el.classList.contains(\"is-closing\"))\n    return;\n\n  el.onion?.abort();\n\n  const handleEnd = () => {\n    setClasses(el, {\n      'is-open': true,\n      'is-closed': false,\n      'is-opening': false,\n      'is-closing': false,\n    });\n    el.onion?.abort();\n  }\n\n  const timeoutID = setTimeout(handleEnd, 2000);\n\n  el.onion = {\n    abort: () => {\n      removeEndListener(el, handleEnd);\n      clearTimeout(timeoutID);\n    }\n  }\n\n  addEndListener(el, handleEnd);\n\n  setClasses(el, {\n    'is-open': false,\n    'is-closed': false,\n    'is-opening': false,\n    'is-closing': false,\n  });\n\n  setTimeout(() => {\n    setClasses(el, {\n      'is-open': true,\n      'is-closed': false,\n      'is-opening': true,\n      'is-closing': false,\n    });\n  });\n}\n\nexport function hide(el: OnionElement) {\n  if (!(el instanceof HTMLElement)) return;\n\n  if (el.classList.contains(\"is-closed\"))\n    return;\n\n  el.onion?.abort();\n\n  const handleEnd = () => {\n    setClasses(el, {\n      'is-open': false,\n      'is-closed': true,\n      'is-opening': false,\n      'is-closing': false,\n    });\n    el.onion?.abort();\n  }\n\n  const timeoutID = setTimeout(handleEnd, 2000);\n\n  el.onion = {\n    abort: () => {\n      removeEndListener(el, handleEnd);\n      clearTimeout(timeoutID);\n    }\n  }\n\n  addEndListener(el, handleEnd);\n\n  setClasses(el, {\n    'is-open': true,\n    'is-closed': false,\n    'is-opening': false,\n    'is-closing': true,\n  });\n}\n\nexport function toggle(el: OnionElement, force?: boolean) {\n  if (!(el instanceof HTMLElement)) return;\n\n  el.onion?.abort();\n\n  if (typeof force === 'undefined') {\n    if (el.classList.contains('is-open') && !el.classList.contains(\"is-closing\")) {\n      hide(el);\n    } else {\n      show(el);\n    }\n  } else {\n    if (force) show(el);\n    else hide(el);\n  }\n}\n"],"names":["setClasses","el","classes","Object","entries","forEach","key","classList","toggle","value","addEndListener","listener","addEventListener","removeEndListener","removeEventListener","show","HTMLElement","contains","onion","_el$onion","abort","handleEnd","_el$onion2","timeoutID","setTimeout","clearTimeout","_el$onion3","_el$onion4","force","_el$onion5","hide"],"version":3,"file":"index.3fe9b601.js.map","sourceRoot":"/__parcel_source_root/"}